\documentclass[11pt]{article}
\usepackage[review]{emnlp2021}
\usepackage{times}
\usepackage{latexsym}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{xcolor}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{longtable}
\usepackage{todonotes}
\usepackage{enumitem}
\usepackage{cleveref}
\usepackage{array}
\usepackage{makecell}
\usepackage{multirow}
\usepackage{capt-of}

\usepgfplotslibrary{groupplots}
\pgfplotsset{compat=1.16}
\pgfplotsset{every tick label/.append style={font=\footnotesize}}

\renewcommand{\UrlFont}{\ttfamily\small}

\newcommand\jp[1]{\todo[backgroundcolor=blue!10]{JP: #1}}
\newcommand\bn[1]{\todo[backgroundcolor=green!10]{BN: #1}}

% This is not strictly necessary, and may be commented out,
% but it will improve the layout of the manuscript,
% and will typically save some space.
\usepackage{microtype}

%\aclfinalcopy % Uncomment this line for the final submission
%\def\aclpaperid{***} %  Enter the acl Paper ID here

%\setlength\titlebox{5cm}
% You can expand the titlebox if you need extra space
% to show all the authors. Please do not make the titlebox
% smaller than 5cm (the original size); we will check this
% in the camera-ready version and ask you to change it back.

\newcommand\Ppl{\mathsf{Ppl}}
\newcommand\IG{\mathsf{IG}}
\newcommand\Ind{\mathsf{Ind}}
\DeclareMathOperator*{\avg}{average}
\newcommand\BibTeX{B\textsc{ib}\TeX}

\definecolor{color0}{rgb}{0.5508,0.8242,0.7773}
\definecolor{color1}{rgb}{0.9961,0.9961,0.6992}
\definecolor{color2}{rgb}{0.7422,0.7266,0.8516}
\definecolor{color3}{rgb}{0.9805,0.5000,0.4453}
\definecolor{color4}{rgb}{0.5000,0.6914,0.8242}
\definecolor{color5}{rgb}{0.9883,0.7031,0.3828}
\definecolor{color6}{rgb}{0.6992,0.8672,0.4102}

\newlist{hypotheses}{enumerate}{3}
\setlist[hypotheses,1]{parsep=0pt,itemsep=1pt,font=\bfseries,label=(H\arabic*)}

\title{Community-Conditioned Language Models\\ \emph{Supplementary material}}

\author{Anon.}

\date{}

\begin{document}
\maketitle

\appendix
%\bibliography{paper}
%\bibliographystyle{acl_natbib}


\section{Aligned community embeddings}

\noindent\begin{minipage}{\textwidth}
    \centering
  \begin{tikzpicture}
    \begin{groupplot}[%
      group style={group size=1 by 2, vertical sep=1.5cm},
      width=\textwidth,
      height=.55\textwidth,
      scatter/classes={
        0={mark=x, blue},
        1={mark=+, orange},
        2={mark=o, green},
        3={mark=triangle, gray},
        4={mark=star, magenta},
        5={mark=diamond, red}
      },
      ]
      \nextgroupplot[
        xlabel=$U_0$, ylabel=$U_1$,
        legend cell align=left,
        legend style={font=\tiny},
        legend entries = {
          offmychest confession relationships relationship\_advice SuicideWatch, 
          TrueReddit China europe nyc socialism,
          frugalmalefashion running MechanicAdvice personalfinance Flipping,
          darksouls skyrimmods dragonage Xcom MonsterHunter,
          amiugly Rateme ladybonersgw SchoolIdolFestival GoneWildPlus,
          facepalm CrappyDesign mildlyinfuriating cringepics oddlysatisfying,
        },
        legend pos=south east
      ]
      \addplot[%
        scatter, only marks,
        mark options={thick},
       scatter src=explicit symbolic,
        ] table [x={web-PCA0}, y={web-PCA1}, meta={web-cluster}] {floats/comm.csv};
      \nextgroupplot[xlabel=$V_0$, ylabel=$V_0$]
      \addplot[%
        scatter, only marks,
        mark options={thick},
       scatter src=explicit symbolic,
        ] table [x={lstm-3-1-PCA0}, y={lstm-3-1-PCA1}, meta={web-cluster}] {floats/comm.csv};
    \end{groupplot}
  \end{tikzpicture}
  \captionof{figure}{First two components of the aligned social (top) and linguistic (bottom) embeddings,
    where the lingusitic embedding is taken from the LTSM with $l_c=1$.
    Correlation between these directions is given by $\sigma_0 = 53.4$ and $\sigma_1 = 35.6$.
    Colors are assigned by k-means clustering of the social embedding. The legend shows the
    closest 5 communites to each cluster centroid.}
  \label{fig:pca-aligned}
\end{minipage}

\onecolumn
\newpage
\section{Community-level statistics}

\pgfplotstableset{
  begin table=\begin{longtable},
  end table=\end{longtable},
}
\pgfplotstabletypeset[
  columns={lstm-3-0-ppl,lstm-3-1-ppl,lstm-3-1-ig,lstm-3-1-indisc},
  font=\small
]{floats/comm.csv}

\end{document}

